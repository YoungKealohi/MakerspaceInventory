extends layout

block content
  h1 Workers
  p 
    a.button-nav(href=`/machines/`) Go Back To Machines

  if session && session.isAdmin
    p
      a.button-nav(href="/workers/new") Add New Worker

  table(border="1" cellpadding="6" cellspacing="0")
    thead
      tr
        th Name
        th Role
        th Phone Number
        th Email
        th Specialties
        th Availability
        th Actions
    tbody
      each worker in workers
        tr
          td= worker.FirstName + ' ' + worker.LastName
          if worker.IsAdmin
            td Admin
          else
            td= worker.IsBoss ? 'Boss' : 'Worker'
          td= worker.PhoneNumber || '—'
          td= worker.Email || '—'
          td= worker.specialties || '—'
          td!= worker.availabilityDisplay
          td.form
            - const canEdit = session && (session.isAdmin || session.workerId == worker.WorkerID)
            - const canDelete = session && session.isAdmin
            if canEdit
              a.button(href=`/workers/${worker.WorkerID}/edit`) Edit
            //- Do not render Edit button when not allowed
            if canDelete
              form(method="post", action=`/workers/delete/${worker.WorkerID}`, onsubmit="return confirm('Delete this worker?');", style="display:inline; margin-left:8px")
                button.delete(type="submit") Delete
            //- Do not render Delete button when not allowed
